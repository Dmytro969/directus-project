# Розгортання проекту на Vercel

Цей документ містить інструкції щодо розгортання проекту на платформі Vercel.

## Передумови

1. Створіть обліковий запис на [Vercel](https://vercel.com) або увійдіть в існуючий
2. Підготуйте репозиторій проекту (GitHub, GitLab, Bitbucket)
3. Переконайтеся, що проект має правильну структуру Next.js

## Крок 1: Налаштування змінних середовища

Перед розгортанням переконайтеся, що ви налаштували необхідні змінні середовища в файлі `.env.local`. Для роботи з Directus потрібні такі змінні:

```
NEXT_PUBLIC_DIRECTUS_URL=https://suppinfo.directus.app
DIRECTUS_ADMIN_EMAIL=your_email@example.com
DIRECTUS_ADMIN_PASSWORD=your_password
```

**Увага:** На Vercel ці змінні потрібно буде додати в налаштуваннях проекту.

## Крок 2: Розгортання через GitHub/GitLab/Bitbucket (рекомендовано)

1. Зайдіть до [Vercel Dashboard](https://vercel.com/dashboard)
2. Натисніть "Add New..." > "Project"
3. Імпортуйте репозиторій з вашим проектом
4. Налаштуйте параметри проекту:
   - Build Command: `npm run build`
   - Output Directory: `.next`
   - Install Command: `npm install`
   - Node.js Version: 20.x
5. Додайте змінні середовища:
   - NEXT_PUBLIC_DIRECTUS_URL=https://suppinfo.directus.app
   - DIRECTUS_ADMIN_EMAIL=your_email@example.com
   - DIRECTUS_ADMIN_PASSWORD=your_password
6. Натисніть "Deploy"

## Крок 3: Розгортання через Vercel CLI

Альтернативний варіант - використати Vercel CLI:

1. Встановіть Vercel CLI глобально:
```bash
npm install -g vercel
```

2. Увійдіть у свій акаунт:
```bash
vercel login
```

3. Запустіть розгортання з кореня проекту:
```bash
vercel
```

4. Слідуйте інструкціям у консолі, щоб налаштувати проект.

5. Для розгортання в продакшн:
```bash
vercel --prod
```

## Крок 4: Перевірка розгортання

Після успішного розгортання:

1. Перевірте, що сайт доступний за посиланням, яке надасть Vercel
2. Перевірте, що API запити до Directus працюють коректно
3. Переконайтеся, що всі сторінки сайту завантажуються без помилок

## Можливі проблеми

### CORS помилки

Якщо з'являються CORS помилки при запитах до Directus:
- Переконайтеся, що у вашій інстанції Directus налаштовані правильні CORS заголовки
- Домен вашого розгортання має бути доданий до списку дозволених у налаштуваннях Directus

### Помилки автентифікації

Якщо з'являються помилки при автентифікації в Directus:
- Перевірте правильність значень DIRECTUS_ADMIN_EMAIL та DIRECTUS_ADMIN_PASSWORD
- Переконайтеся, що обліковий запис активний у Directus

### Проблеми з відображенням зображень

Якщо зображення не відображаються:
- Перевірте налаштування `next.config.js` для підтримки домену Directus у `images.remotePatterns`
- Переконайтеся, що URL зображень правильний і доступний

## Налаштування домену

Для налаштування власного домену:

1. Перейдіть до панелі управління проектом на Vercel
2. Виберіть вкладку "Domains"
3. Додайте свій домен і слідуйте інструкціям для налаштування DNS

## Оптимізація продуктивності

Для оптимізації продуктивності розгорнутого проекту:

1. Увімкніть автоматичне створення превʼю при pull request (у налаштуваннях Git)
2. Використовуйте аналітику Vercel для відстеження продуктивності
3. Розгляньте можливість використання Vercel Edge Functions для покращення швидкості відповіді

## Оновлення розгорнутого проекту

Для оновлення проекту після внесення змін:

1. Зробіть commit та push до репозиторію (якщо використовуєте інтеграцію з Git)
2. Vercel автоматично розпочне нове розгортання
3. Або запустіть вручну `vercel --prod`, якщо використовуєте CLI 